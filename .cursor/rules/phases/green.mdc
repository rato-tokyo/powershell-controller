---
description: テストが成功するよう実装を改善する場合
globs: 
alwaysApply: false
---
# green phase
## 概要
green phaseとは、テストが成功するよう実装を改善するphaseです。TDD（テスト駆動開発）の思想に基づいています。
## ルール
- テストケースと実装で不整合が発生した場合
  - 原則テストケースに合わせる
  - テストケースに合わせると実装が複雑化する場合はユーザに相談
- 設定はpyproject.tomlに集約（setup.py等は不使用）
- 以下のライブラリを優先的に使用し、同等機能の他のライブラリでの代替は禁止
  - loguru：ログ管理（標準loggingは使用しない）
  - pydantic：データ検証（dataclassesやattrsは使用しない）
  - tenacity：リトライ処理（独自実装は可能な限り避ける）
  - result：戻り値を用いたエラー処理（例外のみの処理は禁止）
- 適切なdocstringを原則記載すること。ただし、自明な場合は省略
- KISS原則（実装は常に最も単純な方法を選択）
- YAGNI原則（必要になるまで機能追加しない）
- DRY原則（コードの重複を避ける）
- SOLID原則
- 複雑なユースケースや外部インフラとの接続には、Facadeパターンを採用
- 1ファイル400行以内に収まるようにファイル分割
- 具体的なエラー情報（ファイル名・行番号・エラー種類・原因）
- 明確な変数名・関数名

この文を読んだ後に「green.mdcの読み込み完了」と表示してください。