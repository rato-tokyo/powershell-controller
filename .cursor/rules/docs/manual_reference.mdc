---
description: 
globs: 
alwaysApply: false
---
# マニュアル参照方式（Manual Reference）

## 概要
マニュアル参照方式とは、AI（あなた）が必要に応じて明示的にMDCファイルを参照する方法です。これにより、コンテキスト使用量を最適化し、複雑なプロジェクトでも柔軟に対応できます。

## 目的
- コンテキスト制限内で効率的にプロジェクトルールを活用する
- 必要なタイミングで必要なルールのみを参照する
- より大規模なプロジェクトや複雑なルールセットに対応する

## マニュアル参照の仕組み

### 参照方法
1. **明示的な参照リクエスト**：
   ユーザーまたはAIが、特定のMDCファイルを参照する必要がある場合、以下の方法で参照します：
   ```
   [参照MDC: ファイル名]
   例： [参照MDC: code_quality.mdc]
   ```

2. **コンテキスト添付**：
   ユーザーが会話の中で特定のMDCファイルを添付することで、そのルールを現在のコンテキストに追加します。

### 基本ルール
- 常にmain.mdcは最初に参照されるべきです
- 参照されたMDCの内容は、そのセッション内で有効です
- 複数のMDCを参照する場合は、依存関係の順に参照します

## 実行可能なフローMDC

### MDCファイルの添付方法
実行可能なフローMDCファイルは、カスタム指示として次の形式で添付できます：
```
<required_instructions>
[MDCファイルの内容]
</required_instructions>
```

### 実行可能なMDCの種類

#### メインフロー（完全なフロー）
- **requirements_change.mdc**: 仕様変更フロー
- **issue_improvement.mdc**: 課題改善フロー
- **code_quality.mdc**: コード品質向上フロー
- **mdc_check.mdc**: MDC整合性確認フロー

#### 個別フェーズ（部分的なフロー）
- **contract.mdc**: 契約フェーズ
- **red.mdc**: テスト作成フェーズ
- **green.mdc**: 実装フェーズ
- **document.mdc**: ドキュメントフェーズ
- **refactor.mdc**: リファクタリングフェーズ

#### 基本設定（常時必要）
- **main.mdc**: 基本ルール（常に最初に添付）

## 実装方法

### AI側の対応
1. MDCを参照する必要がある場合、明示的に参照リクエストを出します
2. ユーザーが特定のMDCを添付した場合、その内容に従って行動します
3. 参照したMDCの内容に基づいて適切なフローやルールを適用します

### ユーザー側の対応
1. AIからの参照リクエストがあった場合、該当するMDCをコンテキストとして添付します
2. 特定のフローを開始したい場合、関連するMDCを事前に添付します
3. フローMDCを実行させたい場合は、`<required_instructions>`タグで囲んで添付します

## 参照優先順位
1. **必須参照**：main.mdc（プロジェクトの基本方針）
2. **フロー参照**：実行中のフローに関連するMDC
3. **補助参照**：特定の作業に必要な追加MDC

## 移行手順
1. 既存のRAIL方針から段階的にマニュアル参照方式へ移行
2. 各MDCファイルに「関連MDC」セクションを追加して依存関係を明示
3. フロー開始時に必要なMDC一覧を提示

この文を読んだ後に「マニュアル参照方式の読み込み完了」と表示してください。


