# PowerShell Controller 開発ガイド

## プロジェクト概要
このプロジェクトは、Pythonから簡単にPowerShellを操作するためのライブラリ「py-pshell」を開発しています。同期・非同期APIを提供し、Windows/Linux/macOSで動作する、クロスプラットフォームなPowerShellコントローラーです。

## 現状の課題と改善案（優先度順）

### 高優先度
1. **エラー検出の自動化**
   - 現状：エラー発生時に手動でログを確認する必要がある
   - 改善案：エラーパターンを定義し、自動検出と通知機能を実装
   - 期待効果：エラー早期発見と迅速な対応が可能に

2. **テストカバレッジの向上**
   - 現状：エッジケースや異常系のテストが不足
   - 改善案：pytest-covを導入し、カバレッジレポートを自動生成
   - 期待効果：テスト品質の可視化と改善点の特定が容易に

3. **非同期処理の安定性向上**
   - 現状：長時間実行時のメモリリークの可能性
   - 改善案：メモリ使用量の監視と自動クリーンアップ機能の実装
   - 期待効果：長時間運用時の安定性向上

### 中優先度
4. **パフォーマンス最適化**
   - 現状：大量のコマンド実行時にパフォーマンスが低下
   - 改善案：コマンド実行のバッチ処理機能の実装
   - 期待効果：大量コマンド実行時の処理速度向上

5. **ドキュメント整備**
   - 現状：APIドキュメントが不足
   - 改善案：Sphinxを使用した自動ドキュメント生成の導入
   - 期待効果：開発者向けドキュメントの充実

### 低優先度
6. **UI改善**
   - 現状：進捗状況の可視化が不十分
   - 改善案：プログレスバーやステータス表示の実装
   - 期待効果：ユーザー体験の向上

## テスト構造
- tests/unit: 単体テスト
- tests/integration: 統合テスト

## 実装時の注意点
- コントローラーとセッションは明確に責務を分離する
- 非同期処理は一貫性を持って実装する
- エラー処理は集約して、使いやすいAPIを提供する
- 設定はpydanticを用いて検証する
- ログはloguruを使用して適切なレベルで出力する 